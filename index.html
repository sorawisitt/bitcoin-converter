<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <meta name="description" content="Professional Bitcoin, Satoshi, and Thai Baht converter with real-time Bitkub rates, Halving countdown, and Network fees.">
Â  Â  <title>Bitcoin Converter (BTC, SAT, THB)</title>
Â  Â  <link rel="icon" type="image/webp" href="https://sorawisit.com/favcon.webp">
Â  Â Â 
Â  Â  <!-- Theme Engine: Prevent White Flash -->
Â  Â  <script>
Â  Â  Â  Â  (function() {
Â  Â  Â  Â  Â  Â  const savedMode = localStorage.getItem('themeMode') || 'system';
Â  Â  Â  Â  Â  Â  let themeToApply = savedMode;
Â  Â  Â  Â  Â  Â  if (savedMode === 'system') {
Â  Â  Â  Â  Â  Â  Â  Â  themeToApply = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.documentElement.setAttribute('data-theme', themeToApply);
Â  Â  Â  Â  })();
Â  Â  </script>

Â  Â  <!-- Fonts -->
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary: #f7931a;
Â  Â  Â  Â  Â  Â  --primary-glow: rgba(247, 147, 26, 0.2);
Â  Â  Â  Â  Â  Â  --primary-hover: #e07b00;
Â  Â  Â  Â  Â  Â  --bg-body: #f8fafc;
Â  Â  Â  Â  Â  Â  --card-bg: rgba(255, 255, 255, 0.75);
Â  Â  Â  Â  Â  Â  --card-border: rgba(255, 255, 255, 0.9);
Â  Â  Â  Â  Â  Â  --text-main: #0f172a;
Â  Â  Â  Â  Â  Â  --text-muted: #64748b;
Â  Â  Â  Â  Â  Â  --border: #e2e8f0;
Â  Â  Â  Â  Â  Â  --input-bg: rgba(255, 255, 255, 0.9);
Â  Â  Â  Â  Â  Â  --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
Â  Â  Â  Â  Â  Â  --radius: 24px;
Â  Â  Â  Â  Â  Â  --success: #10b981;
Â  Â  Â  Â  Â  Â  --danger: #ef4444;
Â  Â  Â  Â  }

Â  Â  Â  Â  [data-theme="dark"] {
Â  Â  Â  Â  Â  Â  --bg-body: #0b0e14;
Â  Â  Â  Â  Â  Â  --card-bg: rgba(17, 24, 39, 0.7);
Â  Â  Â  Â  Â  Â  --card-border: rgba(255, 255, 255, 0.06);
Â  Â  Â  Â  Â  Â  --text-main: #f8fafc;
Â  Â  Â  Â  Â  Â  --text-muted: #94a3b8;
Â  Â  Â  Â  Â  Â  --border: rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  --input-bg: rgba(15, 23, 42, 0.8);
Â  Â  Â  Â  Â  Â  --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  --primary-glow: rgba(247, 147, 26, 0.15);
Â  Â  Â  Â  }

Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Inter', system-ui, -apple-system, sans-serif;
Â  Â  Â  Â  Â  Â  background-color: var(--bg-body);
Â  Â  Â  Â  Â  Â  background-image:Â 
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 0% 0%, var(--primary-glow) 0, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 100% 100%, var(--primary-glow) 0, transparent 50%);
Â  Â  Â  Â  Â  Â  background-attachment: fixed;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 16px;
Â  Â  Â  Â  Â  Â  transition: background-color 0.4s ease, color 0.4s ease;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-container {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 850px;
Â  Â  Â  Â  Â  Â  margin-top: 2vh;
Â  Â  Â  Â  }

Â  Â  Â  Â  .glass-card {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(24px);
Â  Â  Â  Â  Â  Â  -webkit-backdrop-filter: blur(24px);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--card-border);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-lg);
Â  Â  Â  Â  Â  Â  padding: 32px;
Â  Â  Â  Â  Â  Â  margin-bottom: 24px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  header {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 32px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .logo-area {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btc-icon {
Â  Â  Â  Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  filter: drop-shadow(0 0 15px var(--primary-glow));
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  font-size: 1.85rem;
Â  Â  Â  Â  Â  Â  letter-spacing: -0.04em;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--text-main) 0%, var(--primary) 100%);
Â  Â  Â  Â  Â  Â  -webkit-background-clip: text;
Â  Â  Â  Â  Â  Â  -webkit-text-fill-color: transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  .credit {
Â  Â  Â  Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Dashboard Stats Grid Alignment Fix */
Â  Â  Â  Â  .stats-row {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  margin-bottom: 32px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-box {
Â  Â  Â  Â  Â  Â  background: var(--input-bg);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  Â  Â  Â  border-radius: 18px;
Â  Â  Â  Â  Â  Â  padding: 16px 8px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  min-height: 100px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-box.primary-stat {
Â  Â  Â  Â  Â  Â  grid-column: 1 / -1;
Â  Â  Â  Â  Â  Â  border-color: var(--primary);
Â  Â  Â  Â  Â  Â  background: linear-gradient(145deg, var(--input-bg), var(--primary-glow));
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px -5px var(--primary-glow);
Â  Â  Â  Â  Â  Â  padding: 24px 20px;
Â  Â  Â  Â  Â  Â  margin-bottom: 4px;
Â  Â  Â  Â  Â  Â  min-height: auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ticker-label {
Â  Â  Â  Â  Â  Â  font-size: 0.65rem;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 0.12em;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  margin-bottom: 6px;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ticker-value {
Â  Â  Â  Â  Â  Â  font-family: 'JetBrains Mono', monospace;
Â  Â  Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  letter-spacing: -0.02em;
Â  Â  Â  Â  }

Â  Â  Â  Â  .primary-stat .ticker-value {
Â  Â  Â  Â  Â  Â  font-size: 1.75rem;
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  }

Â  Â  Â  Â  .sub-value {
Â  Â  Â  Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  Â  Â  margin-top: 6px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Tech Input Styling */
Â  Â  Â  Â  .converter-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  gap: 16px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .input-wrapper label {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  padding-left: 4px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .input-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  .input-container input {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 16px 54px 16px 16px;
Â  Â  Â  Â  Â  Â  font-family: 'JetBrains Mono', monospace;
Â  Â  Â  Â  Â  Â  font-size: 1.15rem;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  background: var(--input-bg);
Â  Â  Â  Â  Â  Â  border: 2px solid var(--border);
Â  Â  Â  Â  Â  Â  border-radius: 16px;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .input-container input:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  border-color: var(--primary);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 4px var(--primary-glow);
Â  Â  Â  Â  }

Â  Â  Â  Â  .copy-btn {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  right: 12px;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  transform: translateY(-50%);
Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  font-size: 1.4rem;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .copy-btn:active { opacity: 1; transform: translateY(-50%) scale(0.9); }

Â  Â  Â  Â  #supply-warning {
Â  Â  Â  Â  Â  Â  background: rgba(239, 68, 68, 0.1);
Â  Â  Â  Â  Â  Â  color: var(--danger);
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(239, 68, 68, 0.2);
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.3s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(-10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .controls-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding-top: 24px;
Â  Â  Â  Â  Â  Â  border-top: 1px solid var(--border);
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  height: 48px;
Â  Â  Â  Â  Â  Â  padding: 0 16px;
Â  Â  Â  Â  Â  Â  border-radius: 14px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  background: var(--input-bg);
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary {Â 
Â  Â  Â  Â  Â  Â  background: var(--primary);Â 
Â  Â  Â  Â  Â  Â  color: white;Â 
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px var(--primary-glow);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .btn:active { transform: scale(0.96); }

Â  Â  Â  Â  /* Comparison Grid */
Â  Â  Â  Â  .comparison-section { margin-bottom: 40px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .section-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .section-header h2 {
Â  Â  Â  Â  Â  Â  font-size: 1.25rem;
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  letter-spacing: -0.03em;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comparison-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(2, 1fr);
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comparison-card {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--card-border);
Â  Â  Â  Â  Â  Â  padding: 16px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(12px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .item-icon {Â 
Â  Â  Â  Â  Â  Â  font-size: 1.25rem;Â 
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;Â 
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  background: var(--bg-body);
Â  Â  Â  Â  Â  Â  width: 38px;
Â  Â  Â  Â  Â  Â  height: 38px;
Â  Â  Â  Â  Â  Â  line-height: 38px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .item-name { font-weight: 700; font-size: 0.85rem; margin-bottom: 2px; color: var(--text-main); }
Â  Â  Â  Â  .item-thb { font-size: 0.75rem; color: var(--text-muted); font-weight: 500; margin-bottom: 12px; }
Â  Â  Â  Â  .item-sat { font-family: 'JetBrains Mono', monospace; color: var(--primary); font-weight: 800; font-size: 1.1rem; letter-spacing: -0.04em; }

Â  Â  Â  Â  .comparison-card.custom { border: 2px dashed var(--primary); }

Â  Â  Â  Â  /* Modal */
Â  Â  Â  Â  #modal-overlay {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; right: 0; bottom: 0;
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.6);
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: flex-end;Â 
Â  Â  Â  Â  Â  Â  z-index: 2000;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(8px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .modal-content {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  padding: 24px;
Â  Â  Â  Â  Â  Â  border-radius: 24px 24px 0 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--card-border);
Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-lg);
Â  Â  Â  Â  Â  Â  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes slideUp {
Â  Â  Â  Â  Â  Â  from { transform: translateY(100%); }
Â  Â  Â  Â  Â  Â  to { transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .modal-content input {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 14px;
Â  Â  Â  Â  Â  Â  margin-bottom: 12px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  Â  Â  Â  background: var(--input-bg);
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  font-family: inherit;
Â  Â  Â  Â  }

Â  Â  Â  Â  footer {
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  padding-bottom: 60px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  Â  Â  Â  line-height: 1.8;
Â  Â  Â  Â  }

Â  Â  Â  Â  footer a { color: var(--primary); text-decoration: none; font-weight: 600; }

Â  Â  Â  Â  @media (min-width: 769px) {
Â  Â  Â  Â  Â  Â  #modal-overlay { align-items: center; }
Â  Â  Â  Â  Â  Â  .modal-content { border-radius: 24px; animation: fadeIn 0.3s ease; }
Â  Â  Â  Â  Â  Â  .comparison-grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
Â  Â  Â  Â  Â  Â  h1 { font-size: 2.25rem; }
Â  Â  Â  Â  Â  Â  .btc-icon { font-size: 3rem; }
Â  Â  Â  Â  Â  Â  .primary-stat .ticker-value { font-size: 2.5rem; }
Â  Â  Â  Â  Â  Â  .ticker-value { font-size: 1.1rem; }
Â  Â  Â  Â  Â  Â  .glass-card { padding: 40px; }
Â  Â  Â  Â  Â  Â  .stats-row { gap: 16px; grid-template-columns: repeat(3, 1fr); }
Â  Â  Â  Â  Â  Â  .stat-box { min-height: 110px; }
Â  Â  Â  Â  }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .stats-row { grid-template-columns: repeat(2, 1fr); }
Â  Â  Â  Â  Â  Â  .stat-box:nth-child(4) { grid-column: span 2; min-height: 80px; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div id="toast" style="position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--text-main); color: var(--bg-body); padding: 12px 24px; border-radius: 50px; font-weight: 600; z-index: 3000; transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); font-size: 0.8rem; white-space: nowrap; box-shadow: var(--shadow-lg);">Copied to clipboard!</div>

Â  Â  <div id="modal-overlay" onclick="if(event.target === this) closeModal()">
Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  <h3 style="margin-bottom: 20px; font-weight: 800;">Add Custom Goal</h3>
Â  Â  Â  Â  Â  Â  <input type="text" id="new-item-name" placeholder="Target Name (e.g. Dream House)">
Â  Â  Â  Â  Â  Â  <input type="number" id="new-item-price" placeholder="Target Price (THB)">
Â  Â  Â  Â  Â  Â  <input type="text" id="new-item-icon" placeholder="Icon Emoji (e.g. ğŸ°)">
Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 12px; margin-top: 10px;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" style="flex: 1;" onclick="closeModal()">Cancel</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" style="flex: 1;" onclick="saveCustomItem()">Save Goal</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="main-container">
Â  Â  Â  Â  <header>
Â  Â  Â  Â  Â  Â  <div class="logo-area">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="btc-icon">â‚¿</span>
Â  Â  Â  Â  Â  Â  Â  Â  <h1>Bitcoin Converter</h1>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p class="credit">Dev <a href="https://x.com/sorawisitt" target="_blank">@SorawisitT</a></p>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  <div class="glass-card">
Â  Â  Â  Â  Â  Â  <div class="stats-row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-box primary-stat">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="ticker-label">BTC Market Price</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticker-value" id="ticker-btc-thb">à¸¿0.00</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sub-value" id="ticker-thb-sat">---</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-box">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="ticker-label">Halving</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticker-value" id="halving-timer">--d --h</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sub-value">Next Reward Cut</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-box">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="ticker-label">Network Fee</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticker-value" id="fee-high">-- sat</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sub-value">Priority Next Block</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-box">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="ticker-label">Sync Status</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticker-value" id="countdown-text">30s</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sub-value" id="status-text">Connected</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="converter-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Thai Baht <span>THB</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="thb-input" placeholder="0" inputmode="numeric">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="copy-btn" onclick="copyValue('thb-input')">ğŸ“„</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Satoshi <span>SAT</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="sat-input" placeholder="0" inputmode="numeric">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="copy-btn" onclick="copyValue('sat-input')">ğŸ“„</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Bitcoin <span>BTC</span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="btc-input" placeholder="0" inputmode="decimal">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="copy-btn" onclick="copyValue('btc-input')">ğŸ“„</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="supply-warning">
Â  Â  Â  Â  Â  Â  Â  Â  âš ï¸ Warning: Only 21,000,000 Bitcoin will ever exist. Values capped to total supply.
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="controls-row">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" id="theme-toggle">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="theme-icon">ğŸŒ“</span> <span id="theme-label">System</span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" id="refresh-btn">ğŸ”„ Update</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="comparison-section">
Â  Â  Â  Â  Â  Â  <div class="section-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>The Bitcoin Standard</h2>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="comparison-grid" id="standard-grid"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="comparison-section" id="goals-section" style="display: none;">
Â  Â  Â  Â  Â  Â  <div class="section-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Custom Savings Goals</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" style="height: 32px; padding: 0 12px; font-size: 0.75rem; flex: initial;" onclick="openModal()">+ New Goal</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="comparison-grid" id="goals-grid"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="no-goals-cta" style="text-align: center; margin-bottom: 60px;">
Â  Â  Â  Â  Â  Â  Â <button class="btn" style="max-width: 280px; margin: 0 auto;" onclick="openModal()">+ Add Custom Goal</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <footer>
Â  Â  Â  Â  Â  Â  Node Sync: <a href="https://bitkub.com" target="_blank">Bitkub</a> & <a href="https://mempool.space" target="_blank">Mempool</a><br>
Â  Â  Â  Â  Â  Â  Purchasing Power Parity â€¢ <a href="https://sorawisit.com" target="_blank">sorawisit.com</a><br>
Â  Â  Â  Â  Â  Â  âš¡ <a href="https://pay.blink.sv/SORAWISIT" target="_blank">Donate Sats</a>
Â  Â  Â  Â  </footer>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  (function() {
Â  Â  Â  Â  Â  Â  const MAX_BTC = 21000000;
Â  Â  Â  Â  Â  Â  const state = {
Â  Â  Â  Â  Â  Â  Â  Â  rate: 3200000,
Â  Â  Â  Â  Â  Â  Â  Â  themeMode: localStorage.getItem('themeMode') || 'system',
Â  Â  Â  Â  Â  Â  Â  Â  secondsRemaining: 30,
Â  Â  Â  Â  Â  Â  Â  Â  nextHalving: new Date('2028-04-17T00:00:00Z').getTime(),
Â  Â  Â  Â  Â  Â  Â  Â  customItems: JSON.parse(localStorage.getItem('customGoals')) || [],
Â  Â  Â  Â  Â  Â  Â  Â  baseItems: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Coffee", price: 120, icon: "â˜•" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Street Food Meal", price: 60, icon: "ğŸœ" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "BTS Fare", price: 20, icon: "ğŸš‡" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Movie Ticket", price: 240, icon: "ğŸ¬" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "iPhone 17 Pro", price: 43900, icon: "ğŸ“±" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Condo Rent", price: 15000, icon: "ğŸ " },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Full Tank of Gas", price: 1200, icon: "â›½" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Gold (1 Baht)", price: 65000, icon: "ğŸ“€" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: "Tesla Model 3", price: 1149000, icon: "ğŸš—" }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const els = {
Â  Â  Â  Â  Â  Â  Â  Â  thb: document.getElementById('thb-input'),
Â  Â  Â  Â  Â  Â  Â  Â  sat: document.getElementById('sat-input'),
Â  Â  Â  Â  Â  Â  Â  Â  btc: document.getElementById('btc-input'),
Â  Â  Â  Â  Â  Â  Â  Â  tickerBtc: document.getElementById('ticker-btc-thb'),
Â  Â  Â  Â  Â  Â  Â  Â  tickerSat: document.getElementById('ticker-thb-sat'),
Â  Â  Â  Â  Â  Â  Â  Â  halving: document.getElementById('halving-timer'),
Â  Â  Â  Â  Â  Â  Â  Â  fee: document.getElementById('fee-high'),
Â  Â  Â  Â  Â  Â  Â  Â  countdown: document.getElementById('countdown-text'),
Â  Â  Â  Â  Â  Â  Â  Â  status: document.getElementById('status-text'),
Â  Â  Â  Â  Â  Â  Â  Â  standardGrid: document.getElementById('standard-grid'),
Â  Â  Â  Â  Â  Â  Â  Â  goalsGrid: document.getElementById('goals-grid'),
Â  Â  Â  Â  Â  Â  Â  Â  goalsSection: document.getElementById('goals-section'),
Â  Â  Â  Â  Â  Â  Â  Â  noGoalsCta: document.getElementById('no-goals-cta'),
Â  Â  Â  Â  Â  Â  Â  Â  modal: document.getElementById('modal-overlay'),
Â  Â  Â  Â  Â  Â  Â  Â  toast: document.getElementById('toast'),
Â  Â  Â  Â  Â  Â  Â  Â  themeToggle: document.getElementById('theme-toggle'),
Â  Â  Â  Â  Â  Â  Â  Â  themeLabel: document.getElementById('theme-label'),
Â  Â  Â  Â  Â  Â  Â  Â  themeIcon: document.getElementById('theme-icon'),
Â  Â  Â  Â  Â  Â  Â  Â  warning: document.getElementById('supply-warning')
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  function init() {
Â  Â  Â  Â  Â  Â  Â  Â  applyTheme(); // Updates labels/icons based on initial state
Â  Â  Â  Â  Â  Â  Â  Â  fetchAllData();
Â  Â  Â  Â  Â  Â  Â  Â  setupListeners();
Â  Â  Â  Â  Â  Â  Â  Â  setInterval(updateTickers, 1000);
Â  Â  Â  Â  Â  Â  Â  Â  setInterval(updateHalving, 1000);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function setupListeners() {
Â  Â  Â  Â  Â  Â  Â  Â  els.thb.oninput = (e) => handleInput(e, 'thb');
Â  Â  Â  Â  Â  Â  Â  Â  els.sat.oninput = (e) => handleInput(e, 'sat');
Â  Â  Â  Â  Â  Â  Â  Â  els.btc.oninput = (e) => handleInput(e, 'btc');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('refresh-btn').onclick = fetchAllData;
Â  Â  Â  Â  Â  Â  Â  Â  els.themeToggle.onclick = toggleTheme;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (state.themeMode === 'system') applyTheme();
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  async function fetchAllData() {
Â  Â  Â  Â  Â  Â  Â  Â  state.secondsRemaining = 30;
Â  Â  Â  Â  Â  Â  Â  Â  els.status.textContent = "Updating...";
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bResp = await fetch(`https://api.bitkub.com/api/market/ticker?sym=THB_BTC&t=${Date.now()}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bData = await bResp.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(bData.THB_BTC) state.rate = parseFloat(bData.THB_BTC.last);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fResp = await fetch('https://mempool.space/api/v1/fees/recommended');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fData = await fResp.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.fee.textContent = `${fData.fastestFee} sat/vB`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateStaticUI();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.status.textContent = "Connected";
Â  Â  Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.status.textContent = "Offline";
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function updateTickers() {
Â  Â  Â  Â  Â  Â  Â  Â  if (state.secondsRemaining > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.secondsRemaining--;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.countdown.textContent = `${state.secondsRemaining}s`;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchAllData();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function updateHalving() {
Â  Â  Â  Â  Â  Â  Â  Â  const now = new Date().getTime();
Â  Â  Â  Â  Â  Â  Â  Â  const dist = state.nextHalving - now;
Â  Â  Â  Â  Â  Â  Â  Â  const days = Math.floor(dist / (1000 * 60 * 60 * 24));
Â  Â  Â  Â  Â  Â  Â  Â  const hours = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
Â  Â  Â  Â  Â  Â  Â  Â  els.halving.textContent = `${days}d ${hours}h`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function updateStaticUI() {
Â  Â  Â  Â  Â  Â  Â  Â  els.tickerBtc.textContent = `à¸¿${state.rate.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
Â  Â  Â  Â  Â  Â  Â  Â  const satsPerThb = Math.round(100000000 / state.rate);
Â  Â  Â  Â  Â  Â  Â  Â  els.tickerSat.textContent = `1 THB â‰ˆ ${satsPerThb.toLocaleString()} sats`;
Â  Â  Â  Â  Â  Â  Â  Â  renderComparison();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function renderComparison() {
Â  Â  Â  Â  Â  Â  Â  Â  els.standardGrid.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  state.baseItems.forEach(item => els.standardGrid.appendChild(createCard(item)));

Â  Â  Â  Â  Â  Â  Â  Â  els.goalsGrid.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (state.customItems.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.goalsSection.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.noGoalsCta.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.customItems.forEach((item, idx) => els.goalsGrid.appendChild(createCard(item, true, idx)));
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.goalsSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.noGoalsCta.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function createCard(item, isCustom = false, idx = null) {
Â  Â  Â  Â  Â  Â  Â  Â  const btcVal = item.price / state.rate;
Â  Â  Â  Â  Â  Â  Â  Â  const satVal = Math.round(btcVal * 100000000);
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  card.className = `comparison-card ${isCustom ? 'custom' : ''}`;
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isCustom ? `<button style="position:absolute;top:8px;right:8px;background:none;border:none;color:var(--danger);cursor:pointer;font-weight:bold;font-size:1.1rem;padding:4px;" onclick="deleteItem(${idx})">Ã—</button>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="item-icon">${item.icon}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-name">${item.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-thb">à¸¿${Math.round(item.price).toLocaleString()}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-sat">${satVal.toLocaleString()} sats</div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return card;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function formatNumber(num, isBTC = false) {
Â  Â  Â  Â  Â  Â  Â  Â  if (isNaN(num)) return "0";
Â  Â  Â  Â  Â  Â  Â  Â  if (isBTC) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return parseFloat(num.toFixed(8)).toLocaleString('en-US', { maximumFractionDigits: 8 });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return Math.round(num).toLocaleString('en-US');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function handleInput(e, source) {
Â  Â  Â  Â  Â  Â  Â  Â  const input = e.target;
Â  Â  Â  Â  Â  Â  Â  Â  const originalSelectionStart = input.selectionStart;
Â  Â  Â  Â  Â  Â  Â  Â  const originalValue = input.value;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  let rawValStr = source === 'btc' ? input.value.replace(/[^0-9.]/g, '') : input.value.replace(/\D/g, '');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'btc') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const parts = rawValStr.split('.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (parts.length > 2) rawValStr = parts[0] + '.' + parts.slice(1).join('');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (rawValStr === '' || rawValStr === '.') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (rawValStr === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.thb.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.sat.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.btc.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.warning.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  let val = parseFloat(rawValStr);
Â  Â  Â  Â  Â  Â  Â  Â  let currentBTC = 0;
Â  Â  Â  Â  Â  Â  Â  Â  let showWarning = false;

Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'thb') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentBTC = val / state.rate;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (source === 'sat') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentBTC = val / 100000000;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (source === 'btc') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentBTC = val;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (currentBTC > MAX_BTC) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentBTC = MAX_BTC;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showWarning = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'thb') val = MAX_BTC * state.rate;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'sat') val = MAX_BTC * 100000000;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'btc') val = MAX_BTC;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rawValStr = val.toString();
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  els.warning.style.display = showWarning ? 'block' : 'none';

Â  Â  Â  Â  Â  Â  Â  Â  let formattedTyped;
Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'btc') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const [intPart, decPart] = rawValStr.split('.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formattedTyped = parseInt(intPart || '0', 10).toLocaleString('en-US');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (decPart !== undefined) formattedTyped += '.' + decPart.substring(0, 8);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formattedTyped = Math.round(val).toLocaleString('en-US');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  input.value = formattedTyped;

Â  Â  Â  Â  Â  Â  Â  Â  const addedChars = input.value.length - originalValue.length;
Â  Â  Â  Â  Â  Â  Â  Â  let newCursorPos = originalSelectionStart + addedChars;
Â  Â  Â  Â  Â  Â  Â  Â  input.setSelectionRange(newCursorPos, newCursorPos);

Â  Â  Â  Â  Â  Â  Â  Â  if (source === 'thb') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.sat.value = formatNumber(currentBTC * 100000000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.btc.value = formatNumber(currentBTC, true);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (source === 'sat') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.thb.value = formatNumber(currentBTC * state.rate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.btc.value = formatNumber(currentBTC, true);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (source === 'btc') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.thb.value = formatNumber(currentBTC * state.rate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.sat.value = formatNumber(currentBTC * 100000000);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  window.openModal = () => els.modal.style.display = 'flex';
Â  Â  Â  Â  Â  Â  window.closeModal = () => els.modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  window.saveCustomItem = () => {
Â  Â  Â  Â  Â  Â  Â  Â  const name = document.getElementById('new-item-name').value;
Â  Â  Â  Â  Â  Â  Â  Â  const price = parseFloat(document.getElementById('new-item-price').value);
Â  Â  Â  Â  Â  Â  Â  Â  const icon = document.getElementById('new-item-icon').value || 'ğŸ¯';
Â  Â  Â  Â  Â  Â  Â  Â  if (name && price) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state.customItems.push({ name, price, icon });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('customGoals', JSON.stringify(state.customItems));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderComparison();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  closeModal();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  window.deleteItem = (idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  state.customItems.splice(idx, 1);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('customGoals', JSON.stringify(state.customItems));
Â  Â  Â  Â  Â  Â  Â  Â  renderComparison();
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  window.copyValue = (id) => {
Â  Â  Â  Â  Â  Â  Â  Â  const el = document.getElementById(id);
Â  Â  Â  Â  Â  Â  Â  Â  const text = el.value.replace(/,/g, '');
Â  Â  Â  Â  Â  Â  Â  Â  const textArea = document.createElement("textarea");
Â  Â  Â  Â  Â  Â  Â  Â  textArea.value = text;
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(textArea);
Â  Â  Â  Â  Â  Â  Â  Â  textArea.select();
Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');
Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(textArea);
Â  Â  Â  Â  Â  Â  Â  Â  els.toast.style.transform = 'translateX(-50%) translateY(0)';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => els.toast.style.transform = 'translateX(-50%) translateY(100px)', 2000);
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  function toggleTheme() {
Â  Â  Â  Â  Â  Â  Â  Â  const modes = ['system', 'light', 'dark'];
Â  Â  Â  Â  Â  Â  Â  Â  const currentIndex = modes.indexOf(state.themeMode);
Â  Â  Â  Â  Â  Â  Â  Â  state.themeMode = modes[(currentIndex + 1) % modes.length];
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('themeMode', state.themeMode);
Â  Â  Â  Â  Â  Â  Â  Â  applyTheme();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function applyTheme() {
Â  Â  Â  Â  Â  Â  Â  Â  let actualTheme = state.themeMode;
Â  Â  Â  Â  Â  Â  Â  Â  if (state.themeMode === 'system') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.themeIcon.textContent = 'ğŸŒ“';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.themeLabel.textContent = 'System';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.themeIcon.textContent = state.themeMode === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  els.themeLabel.textContent = state.themeMode.charAt(0).toUpperCase() + state.themeMode.slice(1);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  document.documentElement.setAttribute('data-theme', actualTheme);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  init();
Â  Â  Â  Â  })();
Â  Â  </script>
</body>
</html>
